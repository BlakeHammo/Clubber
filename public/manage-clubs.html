<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="./stylesheets/style.css" />
        <link rel="icon" href="./images/icon.png" />
        <script src="https://kit.fontawesome.com/9ee0ab41a9.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
        <script src="./data/users.js" defer></script>
        <script src="./data/clubs.js" defer></script>
        <script src="./javascripts/manage-clubs.js" defer></script>
        <title>CLUBER - Manage Clubs</title>
    </head>
    <body>
        <div id="app">
            <header>
                <h1 id="title" title="Welcome to CLUBER!">CLUBER</h1>
                <svg width="40px" height="40px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="hamburger">
                    <path d="M4 18L20 18" stroke="#ffffff" stroke-width="2" stroke-linecap="round" />
                    <path d="M4 12L20 12" stroke="#ffffff" stroke-width="2" stroke-linecap="round" />
                <path d="M4 6L20 6" stroke="#ffffff" stroke-width="2" stroke-linecap="round" />
            </svg>
            <svg width="40px" height="40px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="exit-menu">
                <path d="M19 5L4.99998 19M5.00001 5L19 19" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </header>
        <div id="main-body">
            <nav id="popout-menu">
                <a href="./feed.html"  title="Browse recent posts and events by Clubs"
                ><div id="notifications" title="Unread posts">99+</div>
                NEWS FEED</a
                >
                <a href="./events.html" title="Browse events you have RSVP'd to">
                    <svg id="calendar-icon" width="0rem" height="0rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="Calendar / Calendar_Days">
                            <path
                            id="Vector"
                            d="M8 4H7.2002C6.08009 4 5.51962 4 5.0918 4.21799C4.71547 4.40973 4.40973 4.71547 4.21799 5.0918C4 5.51962 4 6.08009 4 7.2002V8M8 4H16M8 4V2M16 4H16.8002C17.9203 4 18.4796 4 18.9074 4.21799C19.2837 4.40973 19.5905 4.71547 19.7822 5.0918C20 5.5192 20 6.07899 20 7.19691V8M16 4V2M4 8V16.8002C4 17.9203 4 18.4801 4.21799 18.9079C4.40973 19.2842 4.71547 19.5905 5.0918 19.7822C5.5192 20 6.07899 20 7.19691 20H16.8031C17.921 20 18.48 20 18.9074 19.7822C19.2837 19.5905 19.5905 19.2842 19.7822 18.9079C20 18.4805 20 17.9215 20 16.8036V8M4 8H20M16 16H16.002L16.002 16.002L16 16.002V16ZM12 16H12.002L12.002 16.002L12 16.002V16ZM8 16H8.002L8.00195 16.002L8 16.002V16ZM16.002 12V12.002L16 12.002V12H16.002ZM12 12H12.002L12.002 12.002L12 12.002V12ZM8 12H8.002L8.00195 12.002L8 12.002V12Z"
                            stroke-width="2"
                            stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </g>
                    </svg>
                    MY EVENTS</a
                    >
                <a href="./clubs.html" title="Browse all Clubs on CLUBER"
                    ><svg id="clubs-icon" width="0rem" height="0rem" viewBox="0 -0.5 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>book [#1207]</title>
                        <desc>Created with Sketch.</desc>
                        <defs></defs>
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Dribbble-Light-Preview" transform="translate(-260.000000, -2759.000000)" fill="none">
                                <g id="icons" transform="translate(56.000000, 160.000000)">
                                    <path
                                    d="M222,2612.40709 C222,2612.84565 221.729,2613.23594 221.324,2613.3787 L215,2615.60539 L215,2603.71501 L215,2603.53322 L220.676,2601.53454 C221.325,2601.3055 222,2601.80055 222,2602.50615 L222,2612.40709 Z M213,2603.71501 L213,2615.60539 L206.676,2613.3787 C206.271,2613.23594 206,2612.84565 206,2612.40709 L206,2602.50615 C206,2601.80055 206.675,2601.3055 207.324,2601.53454 L213,2603.53322 L213,2603.71501 Z M221.337,2599.11785 L214.331,2601.64444 C214.117,2601.72147 213.883,2601.72147 213.669,2601.64444 L206.663,2599.11785 C205.362,2598.64847 204,2599.6396 204,2601.05592 L204,2613.11577 C204,2613.997 204.547,2614.78065 205.36,2615.06207 L213.68,2617.94608 C213.888,2618.01797 214.112,2618.01797 214.32,2617.94608 L222.64,2615.06207 C223.453,2614.78065 224,2613.997 224,2613.11577 L224,2601.05592 C224,2599.6396 222.638,2598.64847 221.337,2599.11785 L221.337,2599.11785 Z"
                                    id="book-[#1207]"
                                    ></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                    BROWSE CLUBS</a
                    >
                    <a href="./profile.html" title="Change your profile details">
                        <svg id="profile-icon" width="0rem" height="0rem" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <title>profile_round [#1342]</title>
                            <desc>Created with Sketch.</desc>
                            <defs></defs>
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="Dribbble-Light-Preview" transform="translate(-140.000000, -2159.000000)" fill="#000000">
                                    <g id="icons" transform="translate(56.000000, 160.000000)">
                                        <path
                                        d="M100.562548,2016.99998 L87.4381713,2016.99998 C86.7317804,2016.99998 86.2101535,2016.30298 86.4765813,2015.66198 C87.7127655,2012.69798 90.6169306,2010.99998 93.9998492,2010.99998 C97.3837885,2010.99998 100.287954,2012.69798 101.524138,2015.66198 C101.790566,2016.30298 101.268939,2016.99998 100.562548,2016.99998 M89.9166645,2004.99998 C89.9166645,2002.79398 91.7489936,2000.99998 93.9998492,2000.99998 C96.2517256,2000.99998 98.0830339,2002.79398 98.0830339,2004.99998 C98.0830339,2007.20598 96.2517256,2008.99998 93.9998492,2008.99998 C91.7489936,2008.99998 89.9166645,2007.20598 89.9166645,2004.99998 M103.955674,2016.63598 C103.213556,2013.27698 100.892265,2010.79798 97.837022,2009.67298 C99.4560048,2008.39598 100.400241,2006.33098 100.053171,2004.06998 C99.6509769,2001.44698 97.4235996,1999.34798 94.7348224,1999.04198 C91.0232075,1998.61898 87.8750721,2001.44898 87.8750721,2004.99998 C87.8750721,2006.88998 88.7692896,2008.57398 90.1636971,2009.67298 C87.1074334,2010.79798 84.7871636,2013.27698 84.044024,2016.63598 C83.7745338,2017.85698 84.7789973,2018.99998 86.0539717,2018.99998 L101.945727,2018.99998 C103.221722,2018.99998 104.226185,2017.85698 103.955674,2016.63598"
                                        id="profile_round-[#1342]"
                                        ></path>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        MY PROFILE</a
                        >
                        <a href="./notifications.html" title="Change your notification settings"
                        ><svg id="settings-cog" fill="#000000" width="0rem" height="0rem" viewBox="-1 0 19 19" xmlns="http://www.w3.org/2000/svg" class="cf-icon-svg">
                            <path
                            d="M16.014 8.86v1.44a.587.587 0 0 1-.468.556l-1.182.204a.463.463 0 0 1-.114.006 5.902 5.902 0 0 1-.634 1.528.455.455 0 0 1 .078.084l.691.98a.586.586 0 0 1-.062.725l-1.02 1.02a.586.586 0 0 1-.724.061l-.98-.69a.444.444 0 0 1-.085-.078 5.908 5.908 0 0 1-1.544.637.502.502 0 0 1 0 .175l-.182 1.053a.667.667 0 0 1-.633.532h-1.31a.667.667 0 0 1-.633-.532l-.182-1.053a.495.495 0 0 1 0-.175 5.908 5.908 0 0 1-1.544-.637.444.444 0 0 1-.085.077l-.98.691a.586.586 0 0 1-.725-.062l-1.02-1.02a.586.586 0 0 1-.061-.723l.691-.98a.454.454 0 0 1 .077-.085 5.901 5.901 0 0 1-.633-1.528.466.466 0 0 1-.114-.006l-1.182-.204a.586.586 0 0 1-.468-.556V8.86a.586.586 0 0 1 .468-.556L2.636 8.1a.437.437 0 0 1 .114-.005 5.912 5.912 0 0 1 .633-1.528.466.466 0 0 1-.077-.085l-.691-.98a.587.587 0 0 1 .061-.724l1.02-1.02a.587.587 0 0 1 .725-.062l.98.691a.444.444 0 0 1 .085.078 5.903 5.903 0 0 1 1.528-.634.433.433 0 0 1 .005-.114l.204-1.182a.586.586 0 0 1 .556-.468h1.442a.586.586 0 0 1 .556.468l.204 1.182a.448.448 0 0 1 .005.114 5.908 5.908 0 0 1 1.528.634.444.444 0 0 1 .085-.078l.98-.691a.586.586 0 0 1 .724.062l1.02 1.02a.586.586 0 0 1 .062.724l-.691.98a.467.467 0 0 1-.078.085 5.902 5.902 0 0 1 .634 1.528.434.434 0 0 1 .114.005l1.182.204a.587.587 0 0 1 .468.556zm-4.955.72a2.559 2.559 0 1 0-2.56 2.56 2.559 2.559 0 0 0 2.56-2.56z"
                            />
                        </svg>
                        NOTIFICATION SETTINGS</a
                >
                        <a href="./manage-users.html" title="Manage Users">
                            <i id="manage-users-icon" class="fa fa-solid fa-users-gear fa-2xl"></i>
                            MANAGE USERS
                        </a>
                        <a href="./manage-clubs.html" id="current-page" title="Manage Clubs">
                            <i id="manage-clubs-icon" class="fa-solid fa-building-columns fa-2xl"></i>
                            MANAGE CLUBS
                        </a>
                    </nav>
                    <main>
                        <h1 class="page-title">Manage Clubs</h1>
                        <div class="right-aligned">
                            <button type="button" id="add-club-button" v-on:click="showAddModal()">
                                <i class="fa fa-plus fa-regular"></i> Add Club
                            </button>
                        </div>
                        <section id="manage-clubs-table"></section>
                        <div id="clubs-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Club ID</th>
                                        <th>Color</th>
                                        <th>Name</th>
                                        <th>Club Managers</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody v-for="club in clubs">
                                    <tr>
                                        <td>{{club.id}}</td>
                                        <td v-bind:style="{'background-color': club.color}"></td>
                                        <td>{{club.name}}</td>
                                        <td>{{getClubManagers(club.id)}}</td>
                                        <td>
                                            <i class="fa fa-solid fa-pen edit" v-on:click="showEditModal(club.id)"></i>
                                            <i class="fa fa-solid fa-trash delete" v-on:click="delete_modal_visible = true; selected_club = club.id"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="delete-club-modal" class="modal" v-if="delete_modal_visible">
                    <div class="modal-content">
                        <div class="right-aligned">
                            <i class="fa fa-solid fa-xmark close close-icon" v-on:click="delete_modal_visible = false; selected_club = -1"></i>
                        </div>
                        <div>
                            <h2>Delete Club</h2>
                        </div>
                        <div class="dialog-text">
                            <p>Are you sure you want to delete club <b>{{getSelectedClub().name}}</b>?</p>
                        </div>
                        <div class="right-aligned">
                            <button type="button" class="cancel-button close" v-on:click="delete_modal_visible = false; selected_club = -1">Cancel</button>
                            <button type="button" class="delete-button" v-on:click="deleteClub()">Delete</button>
                        </div>
                    </div>
                </div>
                <div id="edit-club-modal" class="modal" v-if="edit_modal_visible">
                    <div class="modal-content">
                        <div class="right-aligned">
                            <i class="fa fa-solid fa-xmark close close-icon" v-on:click="edit_modal_visible = false; selected_club = -1"></i>
                        </div>
                        <div>
                            <h2>Edit Club</h2>
                        </div>
                        <div class="dialog-text">
                            <p>You are editting user <b>{{getSelectedClub().name}}</b>.</p>
                        </div>
                        <div>
                            <label for="color-input">Color</label>
                            <input id="color-input" type="color" v-model="edit_color">
                            <label for="name-input">Name</label>
                            <input id="name-input" type="text" v-model="edit_name">
                            <label>Managers</label>
                            <div v-for="(manager, index) in edit_managers">
                                <div class="textfield-w-remove">
                                    <input type="text" disabled v-bind:value="manager.username">
                                    <i class="fa fa-solid fa-xmark close close-icon" title="Remove manager" v-on:click="removeManager(index)"></i>
                                </div>
                            </div>
                            <div class="select-w-add" v-if="manager_dropdown_visible">
                                <select v-model="new_manager">
                                    <option v-for="manager in available_managers">{{manager.username}}</option>
                                </select>
                                <i class="fa fa-solid fa-xmark close close-icon" title="Close" v-on:click="manager_dropdown_visible = false; new_manager = ''"></i>
                            </div>
                                <button type="button" class="add-manager-button" v-bind:class="{'green': new_manager !== ''}" v-on:click="showManagerDropdownOrAddManager()">
                                    <i class="fa fa-plus fa-regular"></i> Add Manager
                                </button>
                        </div>
                        <div class="right-aligned">
                            <button type="button" class="cancel-button close" v-on:click="edit_modal_visible = false; selected_club = -1">Cancel</button>
                            <button type="button" class="save-button" v-on:click="editClub()">Save</button>
                        </div>
                    </div>
                </div>
                <div id="add-club-modal" class="modal" v-if="add_modal_visible">
                    <div class="modal-content">
                        <div class="right-aligned">
                            <i class="fa fa-solid fa-xmark close close-icon" v-on:click="add_modal_visible = false"></i>
                        </div>
                        <div>
                            <h2>Add Club</h2>
                        </div>
                        <div>
                            <label for="new-color-input">Color</label>
                            <input id="new-color-input" type="color" v-model="edit_color">
                            <label for="new-name-input">Name</label>
                            <input id="new-name-input" type="text" v-model="edit_name">
                            <label>Managers</label>
                            <div v-for="(manager, index) in edit_managers">
                                <div class="textfield-w-remove">
                                    <input type="text" disabled v-bind:value="manager.username">
                                    <i class="fa fa-solid fa-xmark close close-icon" title="Remove manager" v-on:click="removeManager(index)"></i>
                                </div>
                            </div>
                            <div class="select-w-add" v-if="manager_dropdown_visible">
                                <select v-model="new_manager">
                                    <option v-for="manager in available_managers">{{manager.username}}</option>
                                </select>
                                <i class="fa fa-solid fa-xmark close close-icon" title="Close" v-on:click="manager_dropdown_visible = false; new_manager = ''"></i>
                            </div>
                            <button type="button" class="add-manager-button" v-bind:class="{'green': new_manager !== ''}" v-on:click="showManagerDropdownOrAddManager()">
                                <i class="fa fa-plus fa-regular"></i> Add Manager
                            </button>
                        </div>
                        <div class="right-aligned">
                            <button type="button" class="cancel-button close" v-on:click="add_modal_visible = false">Cancel</button>
                            <button type="button" class="save-button" v-on:click="addClub()">Save</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    </body>
</html>
